# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
Типы данных:

ApiListResponse<T>: Структура данных для ответа, включающая общее количество элементов и массив элементов.
FormValidationErrors: Содержит ошибки формы в виде пар “ключ: значение”, где ключ - это имя поля формы, а значение - строка с текстом ошибки.
PaymentMethod: Представляет два варианта оплаты - наличными или онлайн. Используется для описания возможных методов оплаты заказа.
OrderForm: Тип формы заказа IOrder, исключая поля total и items. Используется для создания формы заказа с определенными исключениями.
ProductId: Тип карточки товара, исключая поле id из интерфейса IProduct.
ApiHttpMethods: Содержит список методов для запроса к серверу.

Интерфейсы:

IProduct: Данные о товаре.
IFormState: Состояние формы.
IEventManager: Методы для работы с событиями.
IPaymentForm: Форма с данными о доставке.
IContactsForm: Форма с контактными данными пользователя.
IOrder: Форма заказа.
IBasket: Корзина товаров.
ILarekAPI: Интерфейс для работы с API магазина.
IOrderResult: Результат заказа.
ISuccessResponse: Успешно выполненный заказ.
IActionHandlers: Описание действия onClick.
IModalContent: Модальное окно.
IPageState: Состояние страницы с элементами каталога, счетчиком и блокировкой.

Архитектура приложения:

MVP (Model-View-Presenter) — это архитектурный шаблон, который разделяет приложение на три компонента: модель (данные), представление (UI) и презентер (бизнес-логика).

Базовые классы:

Api: Содержит базовую логику для отправки запросов на сервер. В конструкторе принимается базовый адрес сервера и опциональный объект с заголовками запросов.
EventEmitter: Представляет собой брокер событий, позволяющий отправлять и слушать события в приложении. Используется в презентере для обработки событий и в других частях приложения для генерации событий.
Component: Абстрактный класс для отображения компонентов пользовательского интерфейса (Form, Modal, Success, Card, View). Содержит обобщенный тип T, представляющий тип данных, используемых в компоненте.
View: Наследует класс Component и представляет собой компонент пользовательского интерфейса (Basket, Page) с возможностью обработки событий. Расширяет базовый функционал, предоставленный классом Component, добавляя возможность работы с событиями через объект events типа EventEmitter.

Классы Модели

Modal — это компонент, который включает в себя кнопку закрытия и контент окна. Он наследует функциональность от класса View и использует интерфейс IModalContent для определения ожидаемой структуры данных в компоненте Modal.

Атрибуты:
_content - содержимое модального окна
_closeButton - кнопка закрытия

Методы:
close - закрытие модального окна
render - отрисовывает содержимого модального окна в зависимости от контекста
open - открытие модального окна
set content - устанавливает контент модального окна

Класс Корзина

Basket — это компонент, который наследует базовый класс View и предназначен для отображения содержимого корзины. В нем включены список выбранных товаров, общая стоимость и кнопка для оформления заказа. Для определения структуры данных внутри компонента Basket используется интерфейс IBasket.

Атрибуты:
_button - кнопка которая позволяет работать с корзиной
_total - отображает общую стоимость товаров в корзине
_list - позволяет отображать список карточек товаров

Методы:
set item - устанавливает список товаров в корзине
set total - устанавливает общую сумму продуктов в корзине

Класс Страница

Page — это компонент, который наследует базовый класс View и предназначен для отображения главной страницы приложения. На этой странице отображается листинг карточек товаров, счетчик корзины и модальное окно. Вместо использования обобщенного типа T, в компоненте Page используется интерфейс IPageState, который описывает ожидаемую структуру данных.

Атрибуты:
_counter - число товаров
_basket - кнопка которая позволяет открыть модальное окно корзины
_wrapper - элемент обертки страницы
_catalog - отображает каталога товаров

Методы:
set locked - блокирует прокрутку страницы при открытом модальном окне
set catalog - заменяет содержимое каталога предоставленными данными
set counter - позволяет устанавовить значение счетчика

Класс Форма

Класс для создания форм с различным контентом, наследует класс Component и использует интерфейс IFormState для определения структуры данных, связанных с состоянием компонента Form. Выбирает все формы и вешает на них обработчики, обрабатывает ввод данных пользователя и отображает сообщения об ошибках

Атрибуты:

_errors - Этот элемент отвечает за отображение ошибок, которые могут возникнуть при заполнении формы.
_submit - элемент кнопки для дальнейших действия после заполнения формы

Методы:

set errors: Устанавливает и отображает ошибки валидации формы.
set valid: Управляет доступностью кнопки отправки в зависимости от валидности данных.
render: Используется для отображения формы с учетом переданного состояния.
onInputChange: Этот метод обрабатывает события ввода и уведомляет всех подписчиков об изменениях.

Класс Успешный ответ

Класс для отображения сообщения об успешном завершении операции или процесса, а так же отображения общей суммы операции, наследует класс Component и использует интерфейс ISuccessResponse для определения структуры данных, ожидаемых в компоненте SuccessResponse

Атрибуты:
events - событие клика после завершения заказа
_close - кнопка закрытия
_totalPrice - отображает общую сумму операции

Методы:
set total - позволяет установить текст который отображает сумму операции

Класс Продукт

Класс для реализации карточек товаров в приложении, а так же настройки их атрибутов. Наследует класс Component, как дженерик параметр принимает пользовательский тип данных ProductId

Атрибуты:
_price: Этот элемент показывает цену товара.
_title: Он отображает название товара.
_index: Этот элемент используется для установки индекса товара.
_category: Он позволяет отобразить категорию товара (необязательно).
_description: Этот элемент отображает описание товара (необязательно).
_button: Элемент для действия на карточке товара (необязательно).
_image: Он отвечает за отображение изображения товара (необязательно).

Методы:
set/get price: Эти методы управляют и возвращают цену товара.
set/get index: Они управляют и возвращают уникальный идентификатор товара.
set/get category: Эти методы управляют и возвращают категорию товара.
set/get title: Эти методы управляют и возвращают название товара.
set image: Он устанавливает изображение товара.
set description: Он устанавливает описание товара.
set buttonTitle: Он отображает текст на кнопке.
disablePriceButton: Этот метод управляет доступностью кнопки.

Класс Форма контактных данных

ContactsForm — это класс, который наследует функциональность от класса Form и предназначен для работы с формой контактных данных. Он реализует интерфейс IContactsForm.

Методы:
set phone - Этот метод устанавливает номер телефона
set email - Этот метод устанавливает адрес электронной почты

Класс Форма оплаты

PaymentForm — это класс, который наследует функциональность от класса Form и предназначен для отображения и управления формой доставки. Он реализует интерфейс IPaymentForm.

Атрибуты:
_paymentCash - Этот элемент предназначен для кнопки оплаты наличными.
_paymentCard - Этот элемент представляет собой кнопку для онлайн-оплаты.

Методы:
set address - Он устанавливает адрес доставки.
set payment - Этот метод переключает активность кнопок оплаты.

Слой данных

Класс LarekAPI

Это класс, который наследует функциональность от класса Api и предназначен для взаимодействия с API приложения, получения информации о товарах и списках товаров. Он также содержит свойство cdn, доступное только для чтения.

Методы:
orderProducts: Этот метод отправляет заказ с помощью POST-запроса на сервер.
getProductItem: Он получает данные о конкретном товаре и возвращает объект с информацией о товаре.
getProductList: Этот метод получает данные о каталоге товаров и возвращает массив объектов.

Класс AppData

Это класс, который используется для управления данными в приложении.

Атрибуты:
formErrors: Используется для установки сообщений об ошибках в методах валидации.
basket: Здесь хранится корзина пользователя.
order: Этот объект содержит данные для оформления заказа.
items: Этот объект содержит весь список продуктов.

Методы:
removeBasket: Он удаляет товар из корзины.
addBasket: Этот метод добавляет товар в корзину.
setPreview: Этот метод устанавливает контент для модального окна.
clearBasket: Он очищает корзину пользователя.
inBasket: Он проверяет наличие товара в корзине.
setOrderField: Этот метод устанавливает все данные о заказе при успешной валидации.
validationField: Он выполняет валидацию полей всех форм.
setItems: Этот метод используется для инициализации списка товаров, полученных с сервера.
